<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'sha256-vvt4KWwuNr51XfE5m+hzeNEGhiOfZzG97ccfqGsPwvE='; style-src 'self' 'unsafe-inline'; connect-src 'self';">
    <title>しずトク商品券 取扱店検索</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="main-wrapper">
        <header class="top-bar">
            <div class="top-bar-content">
                <div class="top-bar-main-row">
                     <h1>しずトク商品券 取扱店検索</h1>
                </div>
            </div>
        </header>

        <div class="container">
            <div id="initial-view">
                <h2>しずトク商品券 取扱店検索</h2>
                <p>検索するには絞り込みか「すべて表示」を選択してください</p>
                <button id="show-all-btn">すべて表示</button>
            </div>
            <div id="results-area">
                <div id="results-count"></div>
                <div id="results-container"></div>
            </div>
        </div>
    </div>

    <footer class="page-footer">
        <p>Last updated: 2025-07-01</p>
        <p>情報の正確性には万全を期しておりますが、保証するものではありません。</p>
        <p><span id="site-notice-link">このサイトに関する注意</span> | <span id="settings-link">設定</span></p>
    </footer>

    <button id="fab-search" aria-label="検索フォームを開く">🔍</button>

    <div id="search-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>店舗を検索</h2>
            <div id="modal-search-area"></div>
            <button class="modal-close-btn">閉じる</button>
        </div>
    </div>
    
    <div id="notice-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>このサイトに関する注意</h2>
            <p>本サイトは個人が作成した非公式の検索ツールです。</p>
            <p>掲載している店舗情報は「しずトク商品券」公式サイトの公開PDFを元に作成しておりますが、情報の正確性や最新性について保証するものではありません。</p>
            <p>商品券の利用可否につきましては、ご利用者様ご自身の責任においてご判断ください。</p>
            <p>しずトク商品券 店舗リストのPDF：<a href="https://shizu-tokushouhinken.com/stores/" target="_blank" rel="noopener noreferrer">shizu-tokushouhinken.com/stores/</a></p>
            <p>必要に応じて、直接店舗 または しずトク商品券コールセンターへご確認いただくことを強くおすすめします。</p>
            <button class="modal-close-btn btn-red">わかりました</button>
        </div>
    </div>

    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>設定</h2>
            <fieldset class="filter-group">
                <legend>店舗名タップ時の動作</legend>
                <div class="filter-options" id="link-action-settings">
                    <label><input type="radio" name="linkAction" value="map_address"> 住所をマップで開く (デフォルト)</label>
                    <label><input type="radio" name="linkAction" value="google_search"> 店舗名でGoogle検索</label>
                    <label><input type="radio" name="linkAction" value="none"> 何もしない</label>
                </div>
            </fieldset>
            <fieldset class="filter-group">
                <legend>テーマ設定</legend>
                <div class="filter-options" id="theme-settings">
                    <label><input type="radio" name="theme" value="system"> 端末の設定に連動 (デフォルト)</label>
                    <label><input type="radio" name="theme" value="light"> ライト</label>
                    <label><input type="radio" name="theme" value="dark"> ダーク</label>
                </div>
            </fieldset>
            <button class="modal-close-btn">閉じる</button>
            <button id="reset-settings-btn" class="btn-subtle">設定をリセット</button>
        </div>
    </div>

    <div id="reset-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="cancel-reset-btn" class="btn-subtle">キャンセル</button>
            <h2>設定をリセットしますか？</h2>
            <p>すべての設定が初期状態に戻ります。この操作は取り消せません。</p>
            <div id="reset-slider-container">
                <div class="slider-track">
                    <div class="slider-knob"></div>
                    <span class="slider-text">→ スライドしてリセット</span>
                </div>
            </div>
            <div id="reset-spinner-container">
                <div class="spinner"></div>
                <p id="reset-message"></p>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>